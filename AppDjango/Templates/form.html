{% extends 'base.html' %}

{% block content %}
  <h2>Edit Academy</h2>
  <form method="POST">
    {% csrf_token %}
    {{ AcademyForm.as_p }}
    <button type="submit">Save</button>
  </form>
  
  <hr>

  <h2>Edit Profile</h2>
  <form method="POST">
    {% csrf_token %}
    {{ ProfileForm.as_p }}
    {{ form.styles }}
    <div class="form-group">
      <label for="{{ form.medals.id_for_label }}">Medals:</label>
      {{ form.medals }}
    </div>
    <button type="submit">Save</button>
  </form>

  <h2>Change Password</h2>
  <form method="POST">
    {% csrf_token %}
    {{ PasswordChangeForm.as_p }}
    <button type="submit">Save</button>
  </form>

  <hr>

  <h2>Create Event</h2>
  <form method="POST">
    {% csrf_token %}
    {{ EventForm.as_p }}
    <button type="submit">Create</button>
  </form>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
  $(document).ready(function() {
      var competitorCheckbox = $('#id_competitor');
      var stylesSelect = $('#id_styles');
      var medalsDiv = $('#id_medals');
      var recordsDiv = $('#id_amateur_record, #id_professional_record');
      
      // Initialize field visibility based on initial form values
      toggleFields();
  
      // Toggle fields on checkbox and select change
      competitorCheckbox.change(toggleFields);
      stylesSelect.change(toggleFields);
  
      function toggleFields() {
          var isCompetitor = competitorCheckbox.is(':checked');
          var selectedStyles = stylesSelect.val();
  
          medalsDiv.toggle(isCompetitor && selectedStyles && selectedStyles.includes('MMA'));
          recordsDiv.toggle(isCompetitor && selectedStyles && selectedStyles.includes('MMA'));
      }
  });
  </script>
  
{% endblock %}
